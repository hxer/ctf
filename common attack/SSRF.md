# SSRF

### SSRF 概述

SSRF(Server-Side Request Forgery:服务器端请求伪造) 是一种由攻击者构造形成由服务端发起请求的一个安全漏洞。一般情况下，SSRF攻击的目标是从外网无法访问的内部系统。（正是因为它是由服务端发起的，所以它能够请求到与它相连而与外网隔离的内部系统）

SSRF 形成的原因大都是由于服务端提供了从其他服务器应用获取数据的功能且没有对目标地址做过滤与限制。比如从指定URL地址获取网页文本内容，加载指定地址的图片，下载等等。

* 攻击者利用ssrf可以实现的攻击主要有5种：

1.可以对外网、服务器所在内网、本地进行端口扫描，获取一些服务的banner信息;

2.攻击运行在内网或本地的应用程序（比如溢出）;

3.对内网web应用进行指纹识别，通过访问默认文件实现;

4.攻击内外网的web应用，主要是使用get参数就可以实现的攻击（比如struts2，sqli等）;

5.利用file协议读取本地文件等。

### SSRF 漏洞的寻找

* 1.web功能寻找

    + 分享：通过URL地址分享网页内容
    + 转码服务：通过URL地址把原地址的网页内容调优使其适合手机屏幕浏览
    + 线翻译：通过URL地址翻译对应文本的内容
    + 图片加载与下载：通过URL地址加载或下载图片
    + 图片、文章收藏功能
    + 未公开的api实现以及其他调用URL的功能

    详情参考：[SSRF漏洞的挖掘经验][1]

* 2.URL关键字中寻找

    share

    wap

    url

    link

    src

    source

    target

    display

    sourceURl

    imageURL

    domain

    ...

### SSRF 漏洞中URL地址过滤的绕过

* 1.http://www.baidu.com@10.10.10.10 与 http://10.10.10.10 请求是相同的

* 2.ip地址转换成进制来访问

> 115.239.210.26 ＝ 16373751032

### 

* [SSRF攻击实例解析][2]

[1]: https://sobug.com/article/detail/11
[2]: http://www.freebuf.com/articles/web/20407.html
